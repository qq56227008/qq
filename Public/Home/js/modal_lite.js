(function(N,L,I){function i(g){try{return Array.prototype.slice.call(g,0)}catch(f){for(var l=[],k=0,h=g.length;k<h;k++){l.push(g[k])}return l}}function H(k,h){k=k||"";h=h||L;if(0===k.indexOf("#")){return h.getElementById(k.substring(1))}var q=[];if(/^[a-zA-Z]{1,}$/.test(k)){q=i(h.getElementsByTagName(k))}else{if(0===k.indexOf(".")){if(h.querySelectorAll){q=i(h.querySelectorAll(k))}else{for(var p=h.getElementsByTagName("*"),n=k.substring(1),m=0,l=p.length;m<l;m++){E(p[m],n)&&q.push(p[m])}}}}return q}function e(g,f){g&&1===g.nodeType&&("none"===g.style.display?g.style.display=f?"block":g._oldDisplay||"":f&&(g.style.display="block"))}function u(f){f&&1===f.nodeType&&"none"!==f.style.display&&(f._oldDisplay=f.style.display||"",f.style.display="none")}function K(g,f){if("[object Array]"===Object.prototype.toString.call(g)){for(var k=0,h=g.length;k<h;k++){K(g[k],f)}}else{E(g,f)||(g.className+=" "+f)}}function E(g,f){if(g.className){var h=g.className.split(/\s+/);h.unshift("000");h.push("000");return 2<h.length&&-1<h.join(",").indexOf(","+f+",")}return !1}function G(g,f){if("[object Array]"===Object.prototype.toString.call(g)){for(var l=0,k=g.length;l<k;l++){G(g[l],f)}}else{if(E(g,f)){for(var l=g.className.split(/\s+/),k=0,h=l.length;k<h;k++){if(f===l[k]){l.splice(k,1);break}}g.className=l.join(" ")}}}function b(g,f,h){g.addEventListener?g.addEventListener(f,h,!1):g.attachEvent?g.attachEvent("on"+f,h):g["on"+f]=h}function d(f){this.key=f||"account.xiaomi.com"}function c(g){g=g||{};var f=a,k={},h;for(h in f){h in k||h in g||(g[h]=f[h])}this.opt=g;this.init()}function F(f){J.on(function(g,h){f.style.height=Math.max(g.height,h.height)+"px";f.style.width=h.width+"px"});J.onbeforeResize(function(){f.style.height="auto";f.style.width="100%"})}I=N.MiLogin||(N.MiLogin={});(function(){var f=location.hostname;return -1<f.indexOf("onebox")?"onebox":-1<f.indexOf("preview")?"preview":"release"})();(function(){var f=[];return{add:function(g,k,h){f.push({title:g,message:k,more:h,time:(new Date).getTime()})},get:function(){return f}}})();(function(){var g=navigator.userAgent,f={};/\s+chrome\/([\d\.]*)/i.test(g)?(f.name="Chrome",f.version=parseInt(RegExp.$1)):/msie\s+(\d+\.\d+)/i.test(g)?(f.name="IE",f.version=parseFloat(RegExp.$1)):/\s+firefox\/([\d\.]*)/i.test(g)?(f.name="Firefox",f.version=parseInt(RegExp.$1)):/applewebKit\/([\d\.]*)/i.test(g)?(f.name="Webkit",f.version=parseInt(RegExp.$1),/version\/([\d\.]*)\s+Safari/i.test(g)&&(f.name="Safari",f.version=parseInt(RegExp.$1))):/trident\/([\d\.]*)/i.test(g)?(g=g.match(/rv:([\d\.]*)/))&&2<=g.length?(f.name="IE",f.version=parseFloat(g[1])):(f.name="Trident",f.version=RegExp.$1):(f.name="other",f.version=0);return f})();(function(){var g=L.createElement("a");g.target="_blank";L.body.appendChild(g);var f=0,h=null;return function(q,p){if("_self"===p){location.href=q}else{g.href=q;var n=(new Date).getTime();if(!(h===q&&1000>n-f)){h=q;f=n;try{var m=L.createEvent("MouseEvents");m.initMouseEvent("click",!0,!0,N);g.dispatchEvent(m)}catch(l){g.click()}}}}})();d.prototype={key:"account.xiaomi.com",_read:N.localStorage?function(){var f=N.localStorage.getItem(this.key),f=(new Function("","return "+f))();return"object"==typeof f&&f?f:{}}:function(){return{}},_save:N.localStorage?function(f){N.localStorage.setItem(this.key,JSON.stringify(f))}:function(){return !1},_readAndGc:function(g){var f=this._read(),k;for(k in f){var h=f[k];h.expires&&(new Date).getTime()-h.time>=h.expires&&delete f[k]}this._save(f);return g?f[g]:f},remove:function(g){var f=this._readAndGc();delete f[g];this._save(f)},get:function(f){f=this._readAndGc(f)||{};return f.value?f.value:null},set:function(g,f,l){if(!g){return !1}var k=this._readAndGc(),h=(new Date).getTime();k[g]={value:f,expires:l,time:h};this._save(k)}};N.LStore=new d("account.xiaomi.com");var J={fns:[],beforeFns:[],inited:!1,on:function(f){"function"===typeof f&&this.fns.push(f);!this.inited&&this.init();N.onresize&&N.onresize()},off:function(g){if("function"===typeof g){for(var f=0,h=this.fns.length;f<h;f++){if(g===this.fns[f]){return this.fns.splice(f,1),!0}}}return !1},onbeforeResize:function(f){"function"===typeof f&&this.beforeFns.push(f)},beforeExec:function(){for(var g=0,f;f=this.beforeFns[g++];){f&&f.call(N)}},exec:function(){this.beforeExec();var g;g=N.innerWidth||0;var f=N.innerHeight||0;g||("CSS1Compat"==L.compatMode?(g=L.documentElement.clientWidth,f=L.documentElement.clientHeight):(g=L.body.clientWidth,f=L.body.clientHeight));g={width:g,height:f};for(var f=L.documentElement,l=L.body,k=Math.max(f.clientHeight||0,l.scrollHeight,f.scrollHeight||0,l.offsetHeight,f.offsetHeight||0),f={width:Math.max(f.clientWidth||0,l.scrollWidth,f.scrollWidth||0,l.offsetWidth,f.offsetWidth||0),height:k},l=L.documentElement,k=L.body,l={scleft:Math.max(l.scrollLeft||0,k.scrollLeft),sctop:Math.max(l.scrollTop||0,k.scrollTop)},k=0,h;h=this.fns[k++];){h&&h.call(N,g,f,l)}},init:function(){var g=null,f=this;N.onresize=function(){N.clearTimeout(g);g=N.setTimeout(function(){f.exec()},60)}},triggle:function(){this.exec()}},j={},M=null,D=L.body,a={title:"{Modal-DefTitle}",cls:"",titleCls:"",bodyCls:"",html:"",afterRender:function(){}},o=function(){var f=0;return function(){return"modal-id-"+f++}}();c.prototype={init:function(){var g=this.opt;M||(g.renderTo?M=g.renderTo:(M=L.createElement("div"),K(M,"modal_container"),M.innerHTML='<div class="modal_msk"></div>',D.appendChild(M),F(M)));this.id=g.id||o();var f=this.modal=j[this.id],h=this;f||(f=this.modal=L.createElement("div"),K(f,"modal_tip"),this.hide(),f.id=this.id,f.innerHTML='<div class="modal_tip_hd modal-header"><div class="modal-header-text modal_tip_title"></div><a href="javascript:void(0)" title="" class="modal-header-close btn_mod_close"><span>{MSG-CLOSE}</span></a></div><div class="modal_tip_bd modal-body"></div>',g.renderTo?g.renderTo.appendChild(f):M.appendChild(f),this.header=H(".modal-header",f)[0],this.title=H(".modal-header-text",f)[0],this.body=H(".modal-body",f)[0],this.closeBtn=H(".modal-header-close",f)[0],b(this.closeBtn,"click",function(){h.close()}),this.render(g),j[this.id]=f,this.resizeModal=function(l,q,p){q=f;var n="getComputedStyle" in N?N.getComputedStyle(q):q.currentStyle;q={width:Math.max(parseInt(n.width)||0,q.clientWidth,q.offsetWidth),height:Math.max(parseInt(n.height)||0,q.clientHeight,q.offsetHeight)};n=l.height;l=l.width;var m=p.sctop;p=p.scleft;770>=l&&h.opt.customDevice640?(f.style.marginTop=0,f.style.top=0,f.style.marginLeft=0,f.style.left=0):(q&&q.height&&(f.style.marginTop=q.height<n?m+(n-q.height)/2+"px":0+m+"px",f.style.top=0),q&&q.width&&(f.style.marginLeft=q.width<l?p+(l-q.width)/2+"px":0+p+"px",f.style.left=0))},!g.renderTo&&J.on(this.resizeModal));this.show()},show:function(){this.modal&&(e(M,"hide"),e(this.modal,"hide"),this.opt.renderTo||setTimeout(function(){J.triggle()},200))},beforeClose:function(){if(this.opt.beforeClose){return this.opt.beforeClose.call(this)}},close:function(f){if(this.modal){if(!1===this.beforeClose()){return 0}f?(J.off(this.resizeModal),M.removeChild(this.modal),this.modal=null,j[this.id]=null,u(M,"hide")):this.hide()}},hide:function(){u(M,"hide");u(this.modal,"hide")},render:function(f){this.title.innerHTML=f.title;this.body.innerHTML=f.html;f.titleCls&&K(this.title,f.titleCls);f.bodyCls&&K(this.body,f.bodyCls);f.cls&&K(this.modal,f.cls);f.afterRender.call(this)},update:function(g,f){f&&(g.titleCls&&G(this.title,g.titleCls),g.bodyCls&&G(this.body,g.bodyCls),g.cls&&G(this.modal,g.cls));this.render(g)}};N.Modal=c;I&&I.loaded&&I.loaded()})(window,document);